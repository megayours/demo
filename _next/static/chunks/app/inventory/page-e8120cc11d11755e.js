(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[268],{4451:function(e,t,a){Promise.resolve().then(a.bind(a,2346))},8925:function(e,t,a){"use strict";a.d(t,{h:function(){return r}});var o=a(2642),n=a(6298);let r={getNFTs:async e=>(await e.query("pudgy.get_tokens",{account_id:e.account.id})).map(e=>({...e,blockchain:o.Y.FISHING_GAME})),getNFT:async(e,t,a,n)=>{let r=await e.query("yours.metadata",{project:t,collection:a,token_id:n});if(null!=r)return{token_id:n,metadata:r,blockchain:o.Y.FISHING_GAME}},getPudgyRods:async e=>e.query("pudgy.get_rods",{account_id:e.account.id}),equipRod:async(e,t,a)=>{await e.call((0,n.op)("pudgy.equip_fishing_rod",t,a))},unequipRod:async(e,t)=>{await e.call((0,n.op)("pudgy.unequip_fishing_rod",t))},pullFish:async(e,t)=>{await e.call((0,n.op)("pudgy.pull_fish",t))}}},1633:function(e,t,a){"use strict";a.d(t,{H:function(){return i}});var o=a(2642),n=a(979),r=a(6298);let i={getImportedTokens:async e=>(await e.query("importer.get_imported_tokens")).map(e=>({...e})),getNFT:async(e,t,a,n)=>{let r=await e.query("yours.metadata",{project:t,collection:a,token_id:n});if(null!=r)return{token_id:n,metadata:r,blockchain:o.Y.TOKEN_CHAIN}},getNFTs:async e=>(await e.query("importer.get_tokens",{account_id:e.account.id})).map(e=>({...e,blockchain:o.Y.TOKEN_CHAIN})),getProjects:async e=>await e.query("yours.projects",{owner_id:e.account.id}),getCollections:async(e,t)=>await e.query("yours.collections",{project:t}),importNFT:async(e,t,a)=>{"Pudgy Rods"===a.yours.collection?await e.call((0,r.op)("importer.import_nft",(0,n.G)(a),o.Y.ETHEREUM,"0xROD",t)):await e.call((0,r.op)("importer.import_nft",(0,n.G)(a),o.Y.ETHEREUM,"0xPUDGY",t))},createNFT:async(e,t)=>{await e.call((0,r.op)("importer.create_nft",(0,n.G)(t)))}}},1229:function(e,t,a){"use strict";a.d(t,{ContextProvider:function(){return c},T:function(){return i}});var o=a(7437),n=a(2265);let r=(0,n.createContext)({sessions:{},setSession:()=>{},logout:async()=>{}});function i(){return(0,n.useContext)(r)}function c(e){let{children:t}=e,[a,i]=(0,n.useState)({}),c=(0,n.useRef)({}),l=(0,n.useCallback)((e,t,a)=>{console.log("Setting session for blockchainRid: ".concat(e),t),i(a=>{if(void 0===t){let{[e]:t,...o}=a;return o}return{...a,[e]:t}}),t&&a?(c.current[e.toUpperCase()]=a,localStorage.setItem("session_".concat(e.toUpperCase()),"true")):(delete c.current[e.toUpperCase()],localStorage.removeItem("session_".concat(e.toUpperCase())))},[]),s=(0,n.useCallback)(async e=>{console.log("Handle logout for blockchainRid: ".concat(e));try{console.log("Logout functions available:",Object.keys(c.current));let t=c.current[e.toUpperCase()];if(t){let e=t();e instanceof Promise&&await e,console.log("Logout function executed successfully")}else console.warn("No logout function found for blockchainRid: ".concat(e));i(t=>{let{[e]:a,...o}=t;return o}),delete c.current[e.toUpperCase()],localStorage.removeItem("session_".concat(e.toUpperCase())),console.log("Session and logout function removed")}catch(e){console.error("Error during logout:",e)}},[]);return(0,n.useEffect)(()=>{console.log("Current sessions:",a),console.log("Logout functions available:",Object.keys(c.current))},[a]),(0,o.jsx)(r.Provider,{value:{sessions:a,setSession:l,logout:s},children:t})}},2639:function(e,t,a){"use strict";var o=a(7437),n=a(6648);a(2265);var r=a(1471),i=a(2642);let c=e=>{switch(e){case i.Y.ETHEREUM:return"from-blue-500 via-blue-400 to-blue-300";case i.Y.TOKEN_CHAIN:return"from-purple-600 via-purple-500 to-purple-400";case i.Y.FISHING_GAME:return"from-green-500 via-green-400 to-green-300";default:return"from-gray-500 via-gray-400 to-gray-300"}},l=e=>{switch(e.toLowerCase()){case"fishes caught":case"fishing rod":case"equipped by":case"durability":return"bg-green-500";case"recent ".concat(i.Y.TOKEN_CHAIN," visit"):return"bg-purple-600";default:return"bg-gray-700"}};t.Z=e=>{var t,a,i,s,d;let{imageUrl:u,tokenName:m,tokenDescription:p,metadata:g,blockchain:f,isGamePage:h=!1,actions:y=[]}=e,N=h?Object.entries(g.properties).filter(e=>{let[t]=e;return["Fishes Caught","Fishing Rod"].includes(t)}):Object.entries(g.properties),b=(e,t)=>(0,o.jsxs)("div",{className:"".concat(l(e[0])," rounded-lg p-2 text-xs"),children:[(0,o.jsxs)("span",{className:"font-semibold",children:[e[0],":"]})," ","object"==typeof e[1]&&"value"in e[1]?String(e[1].value):String(e[1])]},"".concat(e[0],"-").concat(t));return(0,o.jsxs)("div",{className:"bg-[var(--color-card)] rounded-lg shadow-xl overflow-hidden transition-transform duration-300 hover:scale-105 max-w-sm mx-auto",children:[(0,o.jsx)("div",{className:"relative w-full h-64",children:(0,o.jsx)(n.default,{src:u,alt:m,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",style:{objectFit:"cover"},className:"rounded-t-lg",priority:!0})}),(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:m}),((null===(a=g.yours)||void 0===a?void 0:null===(t=a.project)||void 0===t?void 0:t.name)||(null===(i=g.yours)||void 0===i?void 0:i.collection))&&(0,o.jsxs)("div",{className:"rounded-lg mb-4",children:[(null===(s=g.yours.project)||void 0===s?void 0:s.name)&&(0,o.jsxs)("p",{className:"text-sm text-gray-300 mb-1",children:[(0,o.jsx)("span",{className:"font-semibold text-[var(--color-secondary)]",children:"Project:"})," ",g.yours.project.name]}),(null===(d=g.yours)||void 0===d?void 0:d.collection)&&(0,o.jsxs)("p",{className:"text-sm text-gray-300",children:[(0,o.jsx)("span",{className:"font-semibold text-[var(--color-secondary)]",children:"Collection:"})," ",g.yours.collection]})]}),(0,o.jsx)("div",{className:"flex flex-col mb-3",children:(0,o.jsx)("div",{className:"inline-flex self-start bg-gradient-to-r ".concat(c(f)," text-white text-sm font-medium px-3 py-1 rounded-full"),children:f})}),(0,o.jsx)("p",{className:"text-gray-300 text-sm line-clamp-3 mb-4",children:p}),(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:N.map((e,t)=>b(e,t))})}),y.length>0&&(0,o.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:y.map((e,t)=>(0,o.jsx)("button",{onClick:e.onClick,className:"mega-button text-sm relative",disabled:e.loading,children:e.loading?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"opacity-0",children:e.label}),(0,o.jsx)("span",{className:"absolute inset-0 flex items-center justify-center",children:(0,o.jsx)(r.Z,{size:"medium"})})]}):e.label},t))})]})]})}},1471:function(e,t,a){"use strict";var o=a(7437);a(2265),t.Z=e=>{let{size:t="medium"}=e,a={small:"border-[1px]",medium:"border-2",large:"border-3"},n={small:"inset-[2px]",medium:"inset-1",large:"inset-1.5"};return(0,o.jsxs)("div",{className:"".concat({small:"h-4 w-4",medium:"h-8 w-8",large:"h-12 w-12"}[t]," relative"),children:[(0,o.jsx)("div",{className:"absolute inset-0 rounded-full animate-spin-slow ".concat(a[t]," border-transparent"),children:(0,o.jsx)("div",{className:"h-full w-full bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 rounded-full ".concat({small:"blur-[1px]",medium:"blur-[2px]",large:"blur-[3px]"}[t]," opacity-75")})}),(0,o.jsx)("div",{className:"absolute ".concat(n[t]," bg-[var(--color-background)] rounded-full")}),(0,o.jsx)("div",{className:"absolute ".concat(n[t]," rounded-full animate-spin ").concat(a[t]," border-transparent"),children:(0,o.jsx)("div",{className:"h-full w-full bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 rounded-full"})})]})}},2346:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return E}});var o=a(7437),n=a(2265),r=a(6463),i=a(2639),c=a(1471),l=a(1633),s=a(979);let d={getGatewayUrl:e=>{let t="ipfs://";if(e.startsWith(t)){let a=e.slice(t.length);return"https://ipfs.io/ipfs/".concat(a)}return e},fetchNFTMetadata:async e=>{let t=await fetch(d.getGatewayUrl(e)),a=await t.json();return{image:d.getGatewayUrl(a.image),name:a.name,description:a.description,attributes:a.attributes}}};var u=a(2642);let m="TheIglooCompany",p=[8109,8110,8111,8112,8113,8114],g=[1447,8400,706,8225,3525,6610],f={getNFTs:async()=>[...await Promise.all(p.map(async e=>{let t=await d.fetchNFTMetadata("".concat("ipfs://bafybeibc5sgo2plmjkq2tzmhrn54bk3crhnc23zd2msg4ea7a4pxrkgfna","/").concat(e));return{token_id:e,metadata:(0,s.w)(t,m,"Pudgy Penguins"),blockchain:u.Y.ETHEREUM}})),...await Promise.all(g.map(async e=>{let t=await d.fetchNFTMetadata("".concat("https://api.pudgypenguins.io/present","/").concat(e)),a={...t,attributes:[t.attributes]};return{token_id:e,metadata:(0,s.w)(a,m,"Pudgy Rods"),blockchain:u.Y.ETHEREUM}}))]};var h=a(1229),y=a(8925),N=a(2755),b=e=>{let{isOpen:t,onClose:a,children:n}=e;return t?(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,o.jsxs)("div",{className:"modal-content bg-gradient-to-br from-[var(--color-surface)] to-[var(--color-background)] rounded-lg p-6 max-w-sm w-full shadow-xl",children:[(0,o.jsx)("div",{className:"flex justify-end",children:(0,o.jsx)("button",{onClick:a,className:"text-[var(--color-text)] hover:text-[var(--color-primary)] transition-colors duration-300",children:"\xd7"})}),n]})}):null},x=a(2523),_=a(6298);async function k(e,t,a,o,n,r){return new Promise((i,c)=>{e.transactionBuilder().add((0,_.op)("yours.init_transfer",a,o,n,r),{onAnchoredHandler:a=>{if(!a){c(Error("No data provided after init_transfer"));return}a.createProof(t.config.blockchainRid).then(o=>(0,_.Tmt)(_.wSQ,t).add(o,{authenticator:_.wSQ}).add((0,_.op)("yours.apply_transfer",a.tx,a.opIndex),{authenticator:_.wSQ,onAnchoredHandler:t=>{if(!t){c(Error("No data provided after apply_transfer"));return}t.createProof(e.blockchainRid).then(a=>e.transactionBuilder().add(a,{authenticator:_.wSQ}).add((0,_.op)("yours.complete_transfer",t.tx,t.opIndex),{authenticator:_.wSQ}).buildAndSend()).then(()=>{i()}).catch(e=>{c(e)})}}).buildAndSendWithAnchoring()).catch(e=>{c(e)})}}).buildAndSendWithAnchoring().catch(e=>{c(e)})})}let v=e=>Object.freeze({...e,transferCrosschain:(t,a,o,n,r)=>k(e,t,a,o,n,function(e){let t=[e.yours.modules,[e.yours.project.name,e.yours.project.owner_id],e.yours.collection];return[e.name,JSON.stringify(e.properties),t,e.description??null,e.image??null,e.animation_url??null]}(r)),getMetadata:(t,a,o)=>e.query("megayours.metadata",{project:t,collection:a,token_id:o})});var E=function(){let[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)(!0),[d,m]=(0,n.useState)({}),{sessions:p}=(0,h.T)(),[g,_]=(0,n.useState)(null),[k,E]=(0,n.useState)(null),j=(0,r.useRouter)(),[w,C]=(0,n.useState)(null),[I,T]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{let e=p[(await (0,x.Z)()).config.blockchainRid.toUpperCase()];e&&_(v(e));let t=p[(await (0,N.Z)()).config.blockchainRid.toUpperCase()];t&&E(v(t))})()},[p]);let F=(0,n.useCallback)(async()=>{s(!0);try{let e=g?await l.H.getNFTs(g):[],a=k?await y.h.getNFTs(k):[],o=await f.getNFTs(),n=await Promise.all(o.map(async e=>{let t=await l.H.getNFT(g,e.metadata.yours.project.name,e.metadata.yours.collection,e.token_id),a=await y.h.getNFT(k,e.metadata.yours.project.name,e.metadata.yours.collection,e.token_id),o=t||a;return console.log("Token ".concat(e.token_id," imported: ").concat(o)),o&&(console.log("Token ".concat(e.token_id," imported: ").concat(JSON.stringify(t))),console.log("Token ".concat(e.token_id," imported: ").concat(JSON.stringify(a)))),o?null:e}));t([...e,...a,...n.filter(e=>null!==e)])}catch(e){console.error("Error refreshing NFTs:",e)}finally{s(!1)}},[g,k]);(0,n.useEffect)(()=>{g&&k&&F()},[F,g,k]);let H=(e,t)=>e.metadata.yours.project.name===t.metadata.yours.project.name&&e.metadata.yours.collection===t.metadata.yours.collection&&e.token_id===t.token_id,A=(0,n.useCallback)((e,a,o)=>{console.log("updatedNFT: ".concat(JSON.stringify(e))),t(t=>{let n=t.map(t=>H(t,e)&&t.blockchain===a?(console.log("Updating NFT from",a,"to",o),{...e,blockchain:o}):t);return n.some(t=>H(t,e)&&t.blockchain===o)||n.push({...e,blockchain:o}),n})},[]),S=(e,t,a)=>{m(o=>({...o,["".concat(e,"-").concat(t)]:a}))},Y=async(e,t)=>{S(e.token_id,"bridge",!0);try{if(e.blockchain===u.Y.ETHEREUM&&t===u.Y.TOKEN_CHAIN){console.log("Importing NFT: ".concat(JSON.stringify(e))),await l.H.importNFT(g,e.token_id,e.metadata);let t=await l.H.getNFT(g,e.metadata.yours.project.name,e.metadata.yours.collection,e.token_id);t&&A({...t,blockchain:u.Y.ETHEREUM},u.Y.ETHEREUM,u.Y.TOKEN_CHAIN)}else if(e.blockchain===u.Y.TOKEN_CHAIN&&t===u.Y.FISHING_GAME){if(!g||!k)return;await g.transferCrosschain(k.client,k.account.id,e.token_id,1,e.metadata);let t=await y.h.getNFT(k,e.metadata.yours.project.name,e.metadata.yours.collection,e.token_id);console.log("Bridged NFT: ".concat(null==t?void 0:t.token_id,"@").concat(null==t?void 0:t.blockchain)),t&&A({...t,blockchain:u.Y.TOKEN_CHAIN},u.Y.TOKEN_CHAIN,u.Y.FISHING_GAME)}else if(e.blockchain===u.Y.FISHING_GAME&&t===u.Y.TOKEN_CHAIN){if(!k||!g)return;await k.transferCrosschain(g.client,g.account.id,e.token_id,1,e.metadata);let t=await l.H.getNFT(g,e.metadata.yours.project.name,e.metadata.yours.collection,e.token_id);console.log("Bridged back NFT: ".concat(JSON.stringify(t))),t&&A({...t,blockchain:u.Y.FISHING_GAME},u.Y.FISHING_GAME,u.Y.TOKEN_CHAIN)}}catch(e){console.error("Error bridging token:",e)}finally{S(e.token_id,"bridge",!1)}},O=e=>{j.push("/game?project=".concat(e.metadata.yours.project,"&collection=").concat(e.metadata.yours.collection,"&tokenId=").concat(e.token_id))},G=e=>{console.log("Handling bridge for ".concat(JSON.stringify(e))),C(e),T(!0)},M=()=>{T(!1),C(null)},R=async e=>{w&&(M(),console.log("Executing bridge to ".concat(e," for ").concat(JSON.stringify(w))),await Y(w,e))},U=e=>{let t=[];return t.push({label:"Bridge",onClick:()=>G(e),loading:d["".concat(e.token_id,"-bridge")]||!1}),e.blockchain===u.Y.FISHING_GAME&&"Pudgy Penguins"===e.metadata.yours.collection&&t.push({label:"Play",onClick:()=>O(e),loading:!1}),t};return g&&k?a?(0,o.jsx)("div",{className:"container mx-auto px-4 py-8 flex justify-center items-center h-screen",children:(0,o.jsx)(c.Z,{size:"large"})}):(0,o.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Your NFT Inventory"}),(0,o.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,o.jsx)(i.Z,{imageUrl:e.metadata.image||"",tokenName:e.metadata.name,tokenDescription:e.metadata.description||"",metadata:e.metadata,actions:U(e),blockchain:e.blockchain},"".concat(e.token_id,"-").concat(e.blockchain)))},e.map(e=>"".concat(e.token_id,"-").concat(e.blockchain)).join(",")),(0,o.jsx)(b,{isOpen:I,onClose:M,children:w&&(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Select a target blockchain"}),(0,o.jsx)("div",{className:"space-y-2",children:[u.Y.TOKEN_CHAIN,u.Y.FISHING_GAME].map(e=>(0,o.jsx)("button",{className:"w-full py-2 px-4 rounded transition-all duration-200 ".concat(w.blockchain===u.Y.ETHEREUM&&e!==u.Y.TOKEN_CHAIN||w.blockchain===u.Y.TOKEN_CHAIN&&e!==u.Y.FISHING_GAME||w.blockchain===u.Y.FISHING_GAME&&e!==u.Y.TOKEN_CHAIN?"bg-gray-300 text-gray-500 cursor-not-allowed opacity-50":"bg-blue-500 text-white hover:bg-blue-600"),onClick:()=>R(e),disabled:w.blockchain===u.Y.ETHEREUM&&e!==u.Y.TOKEN_CHAIN||w.blockchain===u.Y.TOKEN_CHAIN&&e!==u.Y.FISHING_GAME||w.blockchain===u.Y.FISHING_GAME&&e!==u.Y.TOKEN_CHAIN,children:e},e))})]})})]}):(0,o.jsx)("div",{className:"container mx-auto px-4 py-8 flex justify-center items-center h-screen",children:(0,o.jsxs)("p",{children:["Please connect to ",u.Y.TOKEN_CHAIN," and"," ",u.Y.FISHING_GAME," to view your inventory."]})})}},2642:function(e,t,a){"use strict";a.d(t,{X:function(){return n},Y:function(){return o}});let o={TOKEN_CHAIN:"Token Chain",FISHING_GAME:"Fishing Game",ETHEREUM:"Ethereum"},n="0x0000000000000000000000000000000000000000000000000000000000000000"},2755:function(e,t,a){"use strict";let o;var n=a(9659);let r="08CEC3366574AE7F63CCE43A4160D9AD96510F51EBE4F59DAF16A11930B5D62E";async function i(){if(o)return o;let e={directoryNodeUrlPool:"https://node0.devnet1.chromia.dev:7740"};return r?e.blockchainRid=r:e.blockchainIid=2,o=await (0,n.eI)(e)}t.Z=i},2523:function(e,t,a){"use strict";let o;var n=a(9659);let r="https://node0.devnet1.chromia.dev:7740",i="1F7D2F96CDC9DF58F05A335CA68D90654CF6872A89A96092658726111F6D616E";async function c(){if(console.log("Getting TokenChain Chromia Client"),console.log("NODE_URL_POOL",r),console.log("BLOCKCHAIN_RID",i),o)return o;let e={directoryNodeUrlPool:r};return i?e.blockchainRid=i:e.blockchainIid=1,o=await (0,n.eI)(e)}t.Z=c},979:function(e,t,a){"use strict";a.d(t,{G:function(){return r},w:function(){return i}});var o=a(2642),n=a(9109).Buffer;function r(e){var t,a,o;console.log("Serializing metadata: ".concat(JSON.stringify(e)));let n=[e.yours.modules,[e.yours.project.name,e.yours.project.owner_id],e.yours.collection];return[e.name,JSON.stringify(e.properties),n,null!==(t=e.description)&&void 0!==t?t:null,null!==(a=e.image)&&void 0!==a?a:null,null!==(o=e.animation_url)&&void 0!==o?o:null]}function i(e,t,a){return{name:e.name,properties:Object.fromEntries(e.attributes.map(e=>[e.trait_type,e.value])),yours:{modules:[],project:{name:t,owner_id:n.from(o.X,"hex")},collection:a},description:e.description,image:e.image,animation_url:e.animation_url}}},291:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return o}});let o=a(9920)._(a(2265)).default.createContext(null)}},function(e){e.O(0,[999,208,595,971,23,744],function(){return e(e.s=4451)}),_N_E=e.O()}]);