(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9325:function(e,o,n){Promise.resolve().then(n.bind(n,1229)),Promise.resolve().then(n.bind(n,9645)),Promise.resolve().then(n.t.bind(n,8877,23))},1229:function(e,o,n){"use strict";n.d(o,{ContextProvider:function(){return a},T:function(){return r}});var t=n(7437),l=n(2265),s=n(4571);let i=(0,l.createContext)({sessions:{},setSession:()=>{},logout:async()=>{},isLoading:!0});function r(){return(0,l.useContext)(i)}function a(e){let{children:o}=e,[n,r]=(0,l.useState)({}),[a,c]=(0,l.useState)(!0),u=(0,l.useRef)({}),d=(0,l.useCallback)((e,o,n)=>{console.log("Setting session for blockchainIid: ".concat(e),o),r(n=>{if(void 0===o){let{[e]:o,...t}=n;return t}return{...n,[e]:o}}),o&&n?(u.current[e]=n,localStorage.setItem("session_".concat(e),"true")):(delete u.current[e],localStorage.removeItem("session_".concat(e)))},[]),g=(0,l.useCallback)(async e=>{console.log("Handle logout for blockchainIid: ".concat(e));try{let o=u.current[e];if(o){let e=o();e instanceof Promise&&await e,console.log("Logout function executed successfully")}else console.warn("No logout function found for blockchainIid: ".concat(e));r(o=>{let{[e]:n,...t}=o;return t}),delete u.current[e],localStorage.removeItem("session_".concat(e)),console.log("Session and logout function removed")}catch(e){console.error("Error during logout:",e)}},[]);return(0,l.useEffect)(()=>{(async()=>{c(!0);try{if(console.log("Attempting auto-login..."),localStorage.getItem("session_1")){console.log("Found persisted session data, recreating session");let{session:e,logout:o}=await (0,s.e)(!0);e?(console.log("Session recreated successfully"),r({1:e}),u.current[1]=o):(console.log("Failed to recreate session, removing persisted data"),localStorage.removeItem("session_1"))}else{console.log("No persisted session found, creating new session");let{session:e,logout:o}=await (0,s.e)(!0);e?(console.log("New session created successfully"),r({1:e}),u.current[1]=o,localStorage.setItem("session_1","true")):console.log("Failed to create new session")}}catch(e){console.error("Failed to auto-login:",e)}finally{c(!1)}})()},[]),(0,l.useEffect)(()=>{console.log("Current sessions:",n),console.log("Logout functions available:",Object.keys(u.current))},[n]),(0,t.jsx)(i.Provider,{value:{sessions:n,setSession:d,logout:g,isLoading:a},children:o})}},1471:function(e,o,n){"use strict";var t=n(7437);n(2265),o.Z=e=>{let{size:o="medium"}=e,n={small:"border-[1px]",medium:"border-2",large:"border-3"},l={small:"inset-[2px]",medium:"inset-1",large:"inset-1.5"};return(0,t.jsxs)("div",{className:"".concat({small:"h-4 w-4",medium:"h-8 w-8",large:"h-12 w-12"}[o]," relative"),children:[(0,t.jsx)("div",{className:"absolute inset-0 rounded-full animate-spin-slow ".concat(n[o]," border-transparent"),children:(0,t.jsx)("div",{className:"h-full w-full bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 rounded-full ".concat({small:"blur-[1px]",medium:"blur-[2px]",large:"blur-[3px]"}[o]," opacity-75")})}),(0,t.jsx)("div",{className:"absolute ".concat(l[o]," bg-[var(--color-background)] rounded-full")}),(0,t.jsx)("div",{className:"absolute ".concat(l[o]," rounded-full animate-spin ").concat(n[o]," border-transparent"),children:(0,t.jsx)("div",{className:"h-full w-full bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 rounded-full"})})]})}},9645:function(e,o,n){"use strict";n.d(o,{default:function(){return g}});var t=n(7437),l=n(2265),s=n(7138),i=n(1229),r=n(4571),a=n(1471),c=()=>{let{sessions:e,setSession:o,logout:n,isLoading:s}=(0,i.T)(),[c,u]=(0,l.useState)("loading"),d=(0,l.useRef)(!0);(0,l.useEffect)(()=>{console.log("Effect triggered - Sessions changed:",e),console.log("Effect triggered - isLoading:",s),s?u("loading"):u(Object.keys(e).length>0?"logout":"login"),console.log("Button state set to:",c)},[e,s]);let g=async()=>{if(console.log("Login button clicked"),"loading"!==c){u("loading");try{let{session:e,logout:n}=await (0,r.e)();e&&(console.log("New session created:",e),o(1,e,n))}catch(e){console.error("Failed to create session:",e),u("login")}}},f=(0,l.useCallback)(async()=>{if(console.log("Logout button clicked"),"loading"!==c){u("loading");try{console.log("Attempting to logout..."),await n(1),console.log("Logout successful")}catch(e){console.error("Logout failed:",e),u("logout")}finally{d.current=!1}}},[n,c]),h="\n    flex items-center justify-center w-32 px-4 py-2 rounded-full text-white font-semibold\n    transition-all duration-300 ease-in-out\n    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--color-accent)]\n  ",m={login:{class:"".concat(h," bg-gradient-to-r from-purple-500 via-pink-500 to-red-500 hover:from-purple-600 hover:via-pink-600 hover:to-red-600 active:from-purple-700 active:via-pink-700 active:to-red-700"),onClick:g,content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,t.jsx)("span",{children:"Login"})]})},logout:{class:"".concat(h," bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 hover:from-red-600 hover:via-orange-600 hover:to-yellow-600 active:from-red-700 active:via-orange-700 active:to-yellow-700"),onClick:f,content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),(0,t.jsx)("span",{children:"Logout"})]})},loading:{class:"".concat(h," bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 cursor-not-allowed"),onClick:()=>{console.log("Loading button clicked")},content:(0,t.jsx)(a.Z,{size:"medium"})}}[c];return console.log("Rendering button with state:",c),(0,t.jsx)("button",{className:m.class,onClick:()=>{console.log("Button clicked, current state:",c),m.onClick()},disabled:"loading"===c,children:m.content})},u=e=>{let{toggle:o}=e;return(0,t.jsx)("nav",{className:"w-full h-20 bg-[var(--color-surface)] sticky top-0 z-50 shadow-lg",children:(0,t.jsx)("div",{className:"container mx-auto px-4 h-full",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-full",children:[(0,t.jsx)(s.default,{href:"/",className:"flex items-center",children:(0,t.jsx)("span",{className:"text-2xl font-bold rainbow-text",children:"Mega Yours"})}),(0,t.jsx)("button",{type:"button",className:"inline-flex items-center md:hidden text-white",onClick:o,children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),(0,t.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,t.jsx)("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),(0,t.jsxs)("ul",{className:"hidden md:flex gap-x-6 text-white",children:[(0,t.jsx)("li",{children:(0,t.jsx)(s.default,{href:"/",className:"nav-link",children:"Home"})}),(0,t.jsx)("li",{children:(0,t.jsx)(s.default,{href:"/inventory",className:"nav-link",children:"Inventory"})}),(0,t.jsx)("li",{children:(0,t.jsx)(s.default,{href:"/create-nft",className:"nav-link",children:"Create"})})]}),(0,t.jsx)("div",{className:"hidden md:block",children:(0,t.jsx)(c,{})})]})})})},d=e=>{let{isOpen:o,toggle:n}=e;return(0,t.jsxs)("div",{className:"fixed w-full h-full overflow-hidden justify-center bg-[var(--color-surface)] grid pt-[120px] left-0 z-50 transition-all duration-300 ".concat(o?"top-0 opacity-100":"-top-full opacity-0"),children:[(0,t.jsx)("button",{className:"absolute right-0 p-5 text-white",onClick:n,children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,t.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),(0,t.jsxs)("ul",{className:"text-center leading-relaxed text-xl",children:[(0,t.jsx)("li",{className:"py-2",children:(0,t.jsx)(s.default,{href:"/",onClick:n,className:"nav-link",children:"Home"})}),(0,t.jsx)("li",{className:"py-2",children:(0,t.jsx)(s.default,{href:"/inventory",onClick:n,className:"nav-link",children:"Inventory"})}),(0,t.jsx)("li",{className:"py-2",children:(0,t.jsx)(s.default,{href:"/create-nft",onClick:n,className:"nav-link",children:"Create NFT"})})]})]})},g=()=>{let[e,o]=(0,l.useState)(!1),n=()=>{o(!e)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d,{isOpen:e,toggle:n}),(0,t.jsx)(u,{toggle:n})]})}},4571:function(e,o,n){"use strict";let t;n.d(o,{e:function(){return u}});var l=n(8037),s=n(9659),i=n(357);let r=i.env.NEXT_PUBLIC_D1_NODE_URL_POOL||"http://localhost:7740",a=i.env.NEXT_PUBLIC_MEGA_CHAIN_BLOCKCHAIN_RID;async function c(){if(t)return t;let e={directoryNodeUrlPool:r};return a?e.blockchainRid=a:e.blockchainIid=1,t=await (0,s.eI)(e)}async function u(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!window.ethereum)return console.error("Ethereum not found on window"),{session:void 0,logout:()=>{}};let o=await c(),n=await (0,l.nxA)(window.ethereum),t=(0,l._zT)(o,n),s=await t.getAccounts(),i=(0,l.U7w)();if(s.length>0){let o=s[0].id;if(e){let e=await i.getKeyStore(o);if(!(null==e?void 0:e.pubKey))return{session:void 0,logout:()=>{}};{let{session:e,logout:n}=await t.login({accountId:o,loginKeyStore:i,config:{rules:(0,l.mm6)((0,l.i4F)(2)),flags:["MySession"]}});return{session:e,logout:()=>{n(),console.log("Logging out...")}}}}let{session:n,logout:r}=await t.login({accountId:o,loginKeyStore:i,config:{rules:(0,l.mm6)((0,l.i4F)(2)),flags:["MySession"]}});return{session:n,logout:()=>{r(),console.log("Logging out...")}}}if(!e){let e=(0,l.Wh)(["A","T"],n.id),{session:t,logout:s}=await (0,l.UDE)(o,n,l.SCz.open(e,{config:{rules:(0,l.mm6)((0,l.i4F)(2)),flags:["MySession"]}}));return{session:t,logout:()=>{s(),console.log("Logging out...")}}}return{session:void 0,logout:()=>{}}}},8877:function(){}},function(e){e.O(0,[404,999,233,138,971,23,744],function(){return e(e.s=9325)}),_N_E=e.O()}]);