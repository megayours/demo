(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[421],{4544:function(e,t,a){Promise.resolve().then(a.bind(a,4611))},8925:function(e,t,a){"use strict";a.d(t,{h:function(){return r}});var i=a(8037);let r={getNFT:async(e,t,a,i)=>{let r=await e.query("yours.metadata",{project:t,collection:a,token_id:i});if(null!=r)return{token_id:i,metadata:r,blockchain:"Fishing Game",project:r.yours.project,collection:r.yours.collection}},getPudgyRods:async e=>e.query("pudgy.get_rods",{}),equipRod:async(e,t,a)=>{let r={operations:[(0,i.op)("pudgy.equip_fishing_rod",t,a),(0,i.WY6)()],signers:[]};await e.sendTransaction(r)},unequipRod:async(e,t)=>{let a={operations:[(0,i.op)("pudgy.unequip_fishing_rod",t),(0,i.WY6)()],signers:[]};await e.sendTransaction(a)},pullFish:async(e,t)=>{let a={operations:[(0,i.op)("pudgy.pull_fish",t),(0,i.WY6)()],signers:[]};await e.sendTransaction(a)}}},4611:function(e,t,a){"use strict";a.d(t,{default:function(){return m}});var i=a(7437),r=a(2265),l=a(6463),s=a(8925),n=a(2755),o=a(7138),c=a(2639),d=a(6648),u=e=>{let{rods:t,selectedRod:a,onRodClick:r}=e;return(0,i.jsx)("div",{className:"bg-[var(--color-surface)] p-4 rounded-lg shadow-lg",children:(0,i.jsx)("div",{className:"space-y-2",children:t.map(e=>{let t=e.metadata.attributes.find(e=>"Durability"===e.trait_type),l=e.metadata.attributes.find(e=>"Equipped By"===e.trait_type);return(0,i.jsxs)("div",{className:"flex items-center p-2 border rounded-lg cursor-pointer transition-colors ".concat(a===e.token_id?"bg-[var(--color-primary)] border-[var(--color-accent)]":"bg-[var(--color-card)] hover:bg-[var(--color-surface)]"),onClick:()=>r(e.token_id),children:[(0,i.jsx)("div",{className:"w-10 h-10 relative mr-2 flex-shrink-0",children:(0,i.jsx)(d.default,{src:e.metadata.image,alt:e.metadata.name,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",style:{objectFit:"cover"},className:"rounded-md"})}),(0,i.jsxs)("div",{className:"flex-grow overflow-hidden",children:[(0,i.jsx)("h3",{className:"text-sm font-semibold text-white truncate",children:e.metadata.name}),(0,i.jsxs)("div",{className:"mt-1 flex flex-wrap gap-1",children:[t&&(0,i.jsxs)("span",{className:"text-xs bg-[var(--color-surface)] text-white rounded-full px-2 py-0.5 truncate",children:["Durability: ",t.value]}),l&&(0,i.jsxs)("span",{className:"text-xs bg-[var(--color-surface)] text-white rounded-full px-2 py-0.5 truncate",children:["Equipped By: ",l.value]})]})]})]},e.token_id)})})})},h=e=>{let{initialNFT:t}=e,[a,l]=(0,r.useState)(t),[d,h]=(0,r.useState)([]),[m,g]=(0,r.useState)(null),[p,x]=(0,r.useState)(!0),[f,y]=(0,r.useState)(null),b=(0,r.useRef)(null),[v,w]=(0,r.useState)({x:0,y:0}),[j,N]=(0,r.useState)(!1),[k,F]=(0,r.useState)({x:0,y:0,active:!1});(0,r.useEffect)(()=>{(async()=>{try{let e=await (0,n.Z)(),i=await s.h.getPudgyRods(e),r=(await Promise.all(i.map(a=>s.h.getNFT(e,t.project,"Pudgy Rods",a.id)))).filter(e=>void 0!==e);h(r);let l=a.metadata.attributes.find(e=>"Fishing Rod"===e.trait_type);if(l){let e=r.find(e=>e.metadata.name===l.value);e&&g(e.token_id)}}catch(e){console.error("Error fetching Fishing Rods:",e)}finally{x(!1)}})()},[a.metadata.attributes]),(0,r.useEffect)(()=>{let e;let t=b.current;if(!t)return;let a=t.getContext("2d");if(!a)return;let i=()=>{a.clearRect(0,0,t.width,t.height);let r=a.createLinearGradient(0,0,0,t.height);r.addColorStop(0,"#87CEEB"),r.addColorStop(1,"#E0F6FF"),a.fillStyle=r,a.fillRect(0,0,t.width,t.height),a.fillStyle="#4FA1E2",a.fillRect(0,.6*t.height,t.width,.4*t.height),a.strokeStyle="#3D8BD9",a.lineWidth=2;for(let e=0;e<3;e++){a.beginPath(),a.moveTo(0,t.height*(.6+.05*e));for(let i=0;i<t.width;i+=20)a.lineTo(i,t.height*(.6+.05*e)+5*Math.sin(.03*i+.002*Date.now()));a.stroke()}null!==m&&(a.strokeStyle="black",a.lineWidth=2,a.beginPath(),a.moveTo(t.width,.3*t.height),a.lineTo(v.x,v.y),a.stroke()),k.active&&(a.fillStyle="rgba(255, 255, 255, 0.8)",a.beginPath(),a.arc(k.x,k.y,10,0,2*Math.PI),a.fill()),a.fillStyle="rgba(255, 0, 0, 0.5)",a.beginPath(),a.arc(v.x,v.y,10,0,2*Math.PI),a.fill(),a.strokeStyle="red",a.lineWidth=2,a.beginPath(),a.moveTo(v.x-15,v.y),a.lineTo(v.x+15,v.y),a.moveTo(v.x,v.y-15),a.lineTo(v.x,v.y+15),a.stroke(),e=requestAnimationFrame(i)};return i(),()=>{cancelAnimationFrame(e)}},[m,v,k]);let _=async()=>{try{let e=await (0,n.Z)(),t=await s.h.getNFT(e,a.project,a.collection,a.token_id);t&&l(t);let i=await Promise.all(d.map(t=>s.h.getNFT(e,a.project,"Pudgy Rods",t.token_id)));h(i.filter(e=>void 0!==e))}catch(e){console.error("Error refreshing NFT metadata:",e)}},T=async e=>{try{let t=await (0,n.Z)();m===e?(await s.h.unequipRod(t,a.token_id),g(null)):(await s.h.equipRod(t,a.token_id,e),g(e)),await _()}catch(e){console.error("Error equipping/unequipping rod:",e)}},E=async()=>{y(null),setTimeout(async()=>{if(Math.random()>.5){let e=["Trout","Salmon","Bass","Catfish","Tuna"],t=e[Math.floor(Math.random()*e.length)];y("You caught a ".concat(t,"!"));let i=await (0,n.Z)();try{await s.h.pullFish(i,a.token_id),console.log("Successfully pulled fish on the blockchain"),await _()}catch(e){console.error("Error pulling fish:",e),y("Caught a ".concat(t,", but failed to record it. Please try again."))}}else y("No luck this time. Try again!");N(!1)},2e3)};return p?(0,i.jsx)("div",{className:"text-center",children:"Loading Fishing Rods..."}):0===d.length?(0,i.jsxs)("div",{className:"text-center p-4 bg-[var(--color-surface)] rounded-lg",children:[(0,i.jsx)("p",{className:"text-lg font-semibold mb-2",children:"You don't have any Fishing Rods!"}),(0,i.jsx)("p",{className:"mb-4",children:"Visit the Inventory to bridge your Fishing Rods and start fishing."}),(0,i.jsx)(o.default,{href:"/inventory",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition-colors",children:"Go to Inventory"})]}):(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"md:col-span-2 order-1",children:[(0,i.jsx)("canvas",{ref:b,width:800,height:600,className:"w-full h-auto border border-gray-600 rounded cursor-none",onClick:()=>{null===m||j||(N(!0),F({x:v.x,y:v.y,active:!0}),setTimeout(()=>{F(e=>({...e,active:!1})),E()},500))},onMouseMove:e=>{let t=b.current;if(!t)return;let a=t.getBoundingClientRect();w({x:e.clientX-a.left,y:e.clientY-a.top})}}),null===m&&(0,i.jsx)("div",{className:"mt-4 p-4 bg-yellow-900 text-yellow-100 rounded-md",children:"Please equip a fishing rod to start fishing."}),f&&(0,i.jsxs)("div",{className:"mt-4 p-4 bg-green-900 text-green-100 rounded-md flex justify-between items-center",children:[(0,i.jsx)("span",{children:f}),(0,i.jsx)("button",{onClick:()=>{y(null)},className:"bg-green-700 text-white px-2 py-1 rounded hover:bg-green-600 transition-colors",children:"Dismiss"})]})]}),(0,i.jsxs)("div",{className:"md:col-span-1 order-2 flex flex-col",children:[(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsx)(c.Z,{imageUrl:a.metadata.image,tokenName:a.metadata.name,tokenDescription:a.metadata.description,metadata:a.metadata,blockchain:a.blockchain,isGamePage:!0,actions:[]})}),(0,i.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,i.jsx)(u,{rods:d,selectedRod:m,onRodClick:T})})]})]})};function m(){let[e,t]=(0,r.useState)(null),[a,o]=(0,r.useState)(!0),c=(0,l.useSearchParams)();return((0,r.useEffect)(()=>{(async()=>{let e=c.get("tokenId"),a=c.get("project"),i=c.get("collection");if(e&&i&&a)try{let r=await (0,n.Z)(),l=await s.h.getNFT(r,a,i,parseInt(e));l&&l.collection===i&&t(l)}catch(e){console.error("Error fetching NFT:",e)}finally{o(!1)}else o(!1)})()},[c]),a)?(0,i.jsx)("div",{className:"container mx-auto px-4 py-8 text-white",children:"Loading..."}):e?(0,i.jsx)("div",{className:"container mx-auto px-4 py-4 min-h-screen",children:(0,i.jsx)("div",{className:"bg-[var(--color-background)] rounded-lg shadow-md p-4 md:p-6",children:(0,i.jsx)(h,{initialNFT:e})})}):(0,i.jsx)("div",{className:"container mx-auto px-4 py-8 text-white",children:"NFT not found or not part of the Pudgy Penguin Collection."})}},2639:function(e,t,a){"use strict";var i=a(7437),r=a(6648);a(2265);var l=a(1471);let s=e=>{switch(e.toLowerCase()){case"ethereum":return"from-blue-500 via-blue-400 to-blue-300";case"mega chain":return"from-purple-600 via-purple-500 to-purple-400";case"fishing game":return"from-green-500 via-green-400 to-green-300";default:return"from-gray-500 via-gray-400 to-gray-300"}},n=e=>{switch(e.toLowerCase()){case"fishes caught":case"fishing rod":case"equipped by":case"durability":return"bg-green-500";case"recent mega chain visit":return"bg-purple-600";default:return"bg-gray-700"}};t.Z=e=>{let{imageUrl:t,tokenName:a,tokenDescription:o,metadata:c,blockchain:d,isGamePage:u=!1,actions:h=[]}=e,m=(e,t)=>(0,i.jsxs)("div",{className:"".concat(n(e.trait_type)," rounded-lg p-2 text-xs"),children:[(0,i.jsxs)("span",{className:"font-semibold",children:[e.trait_type,":"]})," ",e.value]},"".concat(e.trait_type,"-").concat(t)),g=u?c.attributes.filter(e=>["Fishes Caught","Fishing Rod"].includes(e.trait_type)):c.attributes;return(0,i.jsxs)("div",{className:"bg-[var(--color-card)] rounded-lg shadow-xl overflow-hidden transition-transform duration-300 hover:scale-105 max-w-sm mx-auto",children:[(0,i.jsx)("div",{className:"relative w-full h-64",children:(0,i.jsx)(r.default,{src:t,alt:a,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",style:{objectFit:"cover"},className:"rounded-t-lg",priority:!0})}),(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:a}),(0,i.jsx)("div",{className:"inline-block bg-gradient-to-r ".concat(s(d)," text-white text-xs font-semibold px-2 py-1 rounded-full mb-2"),children:d}),(0,i.jsx)("p",{className:"text-gray-300 text-sm line-clamp-3 mb-4",children:o}),(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:g.map((e,t)=>m(e,t))})}),h.length>0&&(0,i.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:h.map((e,t)=>(0,i.jsx)("button",{onClick:e.onClick,className:"mega-button text-sm relative",disabled:e.loading,children:e.loading?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"opacity-0",children:e.label}),(0,i.jsx)("span",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)(l.Z,{size:"medium"})})]}):e.label},t))})]})]})}},1471:function(e,t,a){"use strict";var i=a(7437);a(2265),t.Z=e=>{let{size:t="medium"}=e,a={small:"border-[1px]",medium:"border-2",large:"border-3"},r={small:"inset-[2px]",medium:"inset-1",large:"inset-1.5"};return(0,i.jsxs)("div",{className:"".concat({small:"h-4 w-4",medium:"h-8 w-8",large:"h-12 w-12"}[t]," relative"),children:[(0,i.jsx)("div",{className:"absolute inset-0 rounded-full animate-spin-slow ".concat(a[t]," border-transparent"),children:(0,i.jsx)("div",{className:"h-full w-full bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 rounded-full ".concat({small:"blur-[1px]",medium:"blur-[2px]",large:"blur-[3px]"}[t]," opacity-75")})}),(0,i.jsx)("div",{className:"absolute ".concat(r[t]," bg-[var(--color-background)] rounded-full")}),(0,i.jsx)("div",{className:"absolute ".concat(r[t]," rounded-full animate-spin ").concat(a[t]," border-transparent"),children:(0,i.jsx)("div",{className:"h-full w-full bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 rounded-full"})})]})}},2755:function(e,t,a){"use strict";let i;var r=a(9659);let l="1DF67D3EBCD16D012BE3A8F591B778F3ECE35E122389E155838CF814A473063E";async function s(){if(i)return i;let e={directoryNodeUrlPool:"https://node0.devnet1.chromia.dev:7740"};return l?e.blockchainRid=l:e.blockchainIid=2,i=await (0,r.eI)(e)}t.Z=s}},function(e){e.O(0,[999,233,138,595,971,23,744],function(){return e(e.s=4544)}),_N_E=e.O()}]);