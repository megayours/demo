(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[763],{4938:function(e,r,o){Promise.resolve().then(o.bind(o,2444))},1633:function(e,r,o){"use strict";o.d(r,{H:function(){return s}});var t=o(2642),n=o(979),a=o(8037);let s={getImportedTokens:async e=>(await e.query("importer.get_imported_tokens")).map(e=>({...e})),getNFT:async(e,r,o,n)=>{let a=await e.query("yours.metadata",{project:r,collection:o,token_id:n});if(null!=a)return{token_id:n,metadata:a,blockchain:t.Y.TOKEN_CHAIN}},getNFTs:async e=>(await e.query("importer.get_tokens",{account_id:e.account.id})).map(e=>({...e,blockchain:t.Y.TOKEN_CHAIN})),getProjects:async e=>await e.query("yours.projects",{owner_id:e.account.id}),getCollections:async(e,r)=>await e.query("yours.collections",{project:r}),importNFT:async(e,r,o)=>{"Pudgy Rods"===o.yours.collection?await e.call((0,a.op)("importer.import_nft",(0,n.G)(o),t.Y.ETHEREUM,"0xROD",r)):await e.call((0,a.op)("importer.import_nft",(0,n.G)(o),t.Y.ETHEREUM,"0xPUDGY",r))},createNFT:async(e,r)=>{await e.call((0,a.op)("importer.create_nft",(0,n.G)(r)))}}},1229:function(e,r,o){"use strict";o.d(r,{ContextProvider:function(){return l},T:function(){return s}});var t=o(7437),n=o(2265);let a=(0,n.createContext)({sessions:{},setSession:()=>{},logout:async()=>{}});function s(){return(0,n.useContext)(a)}function l(e){let{children:r}=e,[o,s]=(0,n.useState)({}),l=(0,n.useRef)({}),c=(0,n.useCallback)((e,r,o)=>{console.log("Setting session for blockchainRid: ".concat(e),r),s(o=>{if(void 0===r){let{[e]:r,...t}=o;return t}return{...o,[e]:r}}),r&&o?(l.current[e.toUpperCase()]=o,localStorage.setItem("session_".concat(e.toUpperCase()),"true")):(delete l.current[e.toUpperCase()],localStorage.removeItem("session_".concat(e.toUpperCase())))},[]),i=(0,n.useCallback)(async e=>{console.log("Handle logout for blockchainRid: ".concat(e));try{console.log("Logout functions available:",Object.keys(l.current));let r=l.current[e.toUpperCase()];if(r){let e=r();e instanceof Promise&&await e,console.log("Logout function executed successfully")}else console.warn("No logout function found for blockchainRid: ".concat(e));s(r=>{let{[e]:o,...t}=r;return t}),delete l.current[e.toUpperCase()],localStorage.removeItem("session_".concat(e.toUpperCase())),console.log("Session and logout function removed")}catch(e){console.error("Error during logout:",e)}},[]);return(0,n.useEffect)(()=>{console.log("Current sessions:",o),console.log("Logout functions available:",Object.keys(l.current))},[o]),(0,t.jsx)(a.Provider,{value:{sessions:o,setSession:c,logout:i},children:r})}},1471:function(e,r,o){"use strict";var t=o(7437);o(2265),r.Z=e=>{let{size:r="medium"}=e,o={small:"border-[1px]",medium:"border-2",large:"border-3"},n={small:"inset-[2px]",medium:"inset-1",large:"inset-1.5"};return(0,t.jsxs)("div",{className:"".concat({small:"h-4 w-4",medium:"h-8 w-8",large:"h-12 w-12"}[r]," relative"),children:[(0,t.jsx)("div",{className:"absolute inset-0 rounded-full animate-spin-slow ".concat(o[r]," border-transparent"),children:(0,t.jsx)("div",{className:"h-full w-full bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 rounded-full ".concat({small:"blur-[1px]",medium:"blur-[2px]",large:"blur-[3px]"}[r]," opacity-75")})}),(0,t.jsx)("div",{className:"absolute ".concat(n[r]," bg-[var(--color-background)] rounded-full")}),(0,t.jsx)("div",{className:"absolute ".concat(n[r]," rounded-full animate-spin ").concat(o[r]," border-transparent"),children:(0,t.jsx)("div",{className:"h-full w-full bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 rounded-full"})})]})}},2444:function(e,r,o){"use strict";o.r(r);var t=o(7437),n=o(2265),a=o(6463),s=o(1229),l=o(1633),c=o(2642),i=o(1471),u=o(2523);r.default=function(){let[e,r]=(0,n.useState)(""),[o,d]=(0,n.useState)(""),[m,p]=(0,n.useState)(""),[f,g]=(0,n.useState)(""),[b,x]=(0,n.useState)(""),[v,h]=(0,n.useState)({}),[y,N]=(0,n.useState)(""),[j,w]=(0,n.useState)(""),[C,k]=(0,n.useState)(!1),[S,_]=(0,n.useState)(),{sessions:E}=(0,s.T)(),F=(0,a.useRouter)(),[T,O]=(0,n.useState)([]),[R,U]=(0,n.useState)([]),[P,I]=(0,n.useState)(!1),[H,A]=(0,n.useState)(!1),[D,q]=(0,n.useState)(""),[G,L]=(0,n.useState)("");(0,n.useEffect)(()=>{(async()=>{let e=E[(await (0,u.Z)()).config.blockchainRid.toUpperCase()];_(e),e&&O(await l.H.getProjects(e))})()},[E]),(0,n.useEffect)(()=>{(async()=>{S&&f?U(await l.H.getCollections(S,f)):U([])})()},[S,f]);let Y=async r=>{if(r.preventDefault(),S){k(!0);try{let r={name:e,properties:v,yours:{modules:[],project:{name:f,owner_id:S.account.id},collection:b},description:o,image:m};await l.H.createNFT(S,r),F.push("/inventory")}catch(e){console.error("Error creating NFT:",e)}finally{k(!1)}}};return S?(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("form",{onSubmit:Y,className:"max-w-lg mx-auto",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"tokenName",className:"block text-sm font-medium mb-1",children:"Token Name"}),(0,t.jsx)("input",{type:"text",id:"tokenName",value:e,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 bg-[var(--color-surface)] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",required:!0})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"tokenDescription",className:"block text-sm font-medium mb-1",children:"Description"}),(0,t.jsx)("textarea",{id:"tokenDescription",value:o,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 bg-[var(--color-surface)] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",rows:3,required:!0})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"imageUrl",className:"block text-sm font-medium mb-1",children:"Image URL"}),(0,t.jsx)("input",{type:"url",id:"imageUrl",value:m,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 bg-[var(--color-surface)] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",required:!0})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"project",className:"block text-sm font-medium mb-1",children:"Project"}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsxs)("select",{id:"project",value:P?"new":f,onChange:e=>{let r=e.target.value;"new"===r?(I(!0),g("")):(I(!1),g(r),x(""),A(!1))},className:"flex-grow px-3 py-2 bg-[var(--color-surface)] border border-gray-600 rounded-l-md focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Select a project"}),(0,t.jsx)("option",{value:"new",children:"Create new project"}),T.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),P&&(0,t.jsxs)("div",{className:"flex flex-grow",children:[(0,t.jsx)("input",{type:"text",value:D,onChange:e=>q(e.target.value),placeholder:"New project name",className:"flex-grow px-3 py-2 bg-[var(--color-surface)] border-t border-b border-gray-600 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]"}),(0,t.jsx)("button",{type:"button",onClick:()=>{D&&!T.includes(D)&&(O(e=>[...e,D]),g(D),q(""),I(!1))},className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-r-md hover:bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",children:"Add"})]})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"collection",className:"block text-sm font-medium mb-1",children:"Collection"}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsxs)("select",{id:"collection",value:H?"new":b,onChange:e=>{let r=e.target.value;"new"===r?(A(!0),x("")):(A(!1),x(r))},className:"flex-grow px-3 py-2 bg-[var(--color-surface)] border border-gray-600 rounded-l-md focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",required:!0,disabled:!f,children:[(0,t.jsx)("option",{value:"",children:"Select a collection"}),(0,t.jsx)("option",{value:"new",children:"Create new collection"}),R.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),H&&(0,t.jsxs)("div",{className:"flex flex-grow",children:[(0,t.jsx)("input",{type:"text",value:G,onChange:e=>L(e.target.value),placeholder:"New collection name",className:"flex-grow px-3 py-2 bg-[var(--color-surface)] border-t border-b border-gray-600 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]"}),(0,t.jsx)("button",{type:"button",onClick:()=>{G&&!R.includes(G)&&(U(e=>[...e,G]),x(G),L(""),A(!1))},className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-r-md hover:bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",children:"Add"})]})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Properties"}),(0,t.jsxs)("div",{className:"flex mb-2",children:[(0,t.jsx)("input",{type:"text",value:y,onChange:e=>N(e.target.value),placeholder:"Key",className:"flex-1 px-3 py-2 bg-[var(--color-surface)] border border-gray-600 rounded-l-md focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]"}),(0,t.jsx)("input",{type:"text",value:j,onChange:e=>w(e.target.value),placeholder:"Value",className:"flex-1 px-3 py-2 bg-[var(--color-surface)] border-t border-b border-gray-600 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]"}),(0,t.jsx)("button",{type:"button",onClick:()=>{y&&j&&(h(e=>({...e,[y]:j})),N(""),w(""))},className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-r-md hover:bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",children:"Add"})]}),Object.entries(v).length>0&&(0,t.jsx)("div",{className:"mt-2 bg-[var(--color-surface)] border border-gray-600 rounded-md p-2",children:Object.entries(v).map(e=>{let[r,o]=e;return(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsxs)("span",{className:"font-medium",children:[r,":"]})," ",o.toString()]},r)})})]}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)("button",{type:"submit",className:"w-full py-2 px-4 bg-[var(--color-primary)] text-white rounded-md hover:bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] transition-all duration-300",disabled:C,children:C?(0,t.jsx)(i.Z,{size:"small"}):"Create NFT"})})]})}):(0,t.jsx)("div",{className:"container mx-auto px-4 py-8 flex justify-center items-center h-screen",children:(0,t.jsxs)("p",{children:["Please connect to ",c.Y.TOKEN_CHAIN," to create an NFT."]})})}},2642:function(e,r,o){"use strict";o.d(r,{X:function(){return n},Y:function(){return t}});let t={TOKEN_CHAIN:"Token Chain",FISHING_GAME:"Fishing Game",ETHEREUM:"Ethereum"},n="0x0000000000000000000000000000000000000000000000000000000000000000"},2523:function(e,r,o){"use strict";let t;var n=o(9659);let a="https://node0.devnet1.chromia.dev:7740",s="1F7D2F96CDC9DF58F05A335CA68D90654CF6872A89A96092658726111F6D616E";async function l(){if(console.log("Getting TokenChain Chromia Client"),console.log("NODE_URL_POOL",a),console.log("BLOCKCHAIN_RID",s),t)return t;let e={directoryNodeUrlPool:a};return s?e.blockchainRid=s:e.blockchainIid=1,t=await (0,n.eI)(e)}r.Z=l},979:function(e,r,o){"use strict";o.d(r,{G:function(){return a},w:function(){return s}});var t=o(2642),n=o(9109).Buffer;function a(e){var r,o,t;console.log("Serializing metadata: ".concat(JSON.stringify(e)));let n=[e.yours.modules,[e.yours.project.name,e.yours.project.owner_id],e.yours.collection];return[e.name,JSON.stringify(e.properties),n,null!==(r=e.description)&&void 0!==r?r:null,null!==(o=e.image)&&void 0!==o?o:null,null!==(t=e.animation_url)&&void 0!==t?t:null]}function s(e,r,o){return{name:e.name,properties:Object.fromEntries(e.attributes.map(e=>[e.trait_type,e.value])),yours:{modules:[],project:{name:r,owner_id:n.from(t.X,"hex")},collection:o},description:e.description,image:e.image,animation_url:e.animation_url}}},6463:function(e,r,o){"use strict";var t=o(1169);o.o(t,"useRouter")&&o.d(r,{useRouter:function(){return t.useRouter}}),o.o(t,"useSearchParams")&&o.d(r,{useSearchParams:function(){return t.useSearchParams}})}},function(e){e.O(0,[999,969,971,23,744],function(){return e(e.s=4938)}),_N_E=e.O()}]);